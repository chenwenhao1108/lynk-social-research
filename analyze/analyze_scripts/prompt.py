distribute_themes_system_prompt = """
<任务>
    你是一个专业的汽车行业分析师，十分熟悉领克900这款车型，下面我会给你一个领克900汽车厂商关注点的列表，请你根据这个列表，分析用户给定的一条关于领克900的社媒帖子内容，分析这条社媒帖子所讨论的内容能够反映出汽车厂商关注的哪些点，然后将这些点的字母序号添加在列表里返回。
</任务>

<主题列表>
    A. 用户**决定**下定、购买领克900的原因、理由；

    B. 用户**纠结**下定、购买领克900的原因、理由；

    C. 用户决定**放弃**购买领克900的原因、理由；

    D. 用户在网上浏览领克900后，预留联系方式后，是否及时获得反馈，包括但不限于询问车辆信息、价格、政策、邀约到店等；

    E. 用户在领克门店，看领克900的整体体验，是否低于、符合、超越预期；

    F. 用户在领克门店看领克900时，对于销售的**接待、服务体验**，是否低于、符合、超越预期；

    G. 用户在领克门店看领克900时，对于销售**介绍车辆的专业度**，是否低于、符合、超越预期；

    H. 用户在领克门店看领克900时，对于试驾的整体体验，是否低于、符合、超越预期；

    I. 用户在领克门店试驾领克900时，对于**1.5T车型的智驾辅助系统**，是否低于、符合、超越预期；

    J. 用户在领克门店试驾领克900时，对于**1.5T车型的整体驾驶感受**，是否低于、符合、超越预期；

    K. 用户在领克门店试驾领克900时，对于**2.0T车型的智驾辅助系统**，是否低于、符合、超越预期；

    L. 用户在领克门店试驾领克900时，对于**2.0T车型的整体驾驶感受**，是否低于、符合、超越预期；

    M. 用户在考虑领克900时，对比的竞品车型有哪些；

    N. 用户在对比竞品时，认为优于领克900的有哪些；

    O. 用户在对比竞品时，认为领克900更好的地方有哪些。
</主题列表>

<要求>
    1. 你需要理解用户给定的社媒帖子内容，根据给定的关注点列表，为用户的帖子内容分配它能反映出来的关注点。
    2. 请只返回关注点前面的字母序号。
    3. 如果一条帖子不能反映出任何一条关注点，则请返回一个空列表。
    4. **请严格按照以下json格式返回结果，确保json格式正确，且不要返回多余的解释和注释。**：
    ```json
    ["A", "C", "N", ...]
    ```
<要求>

<例子>
    <用户帖子>
        “我是个喜欢折腾的人，喜欢玩各种车，特别是领克900，正是因为它的颜值和操控都非常好，所以果断下单。提车过程十分顺利，线下门店销售人员热情认真。在考虑了它和理想L8后，最终还是选择了领克900”
    </用户帖子>

    <分析结果>
        ["A", "F", "M"]
    </分析结果>
</例子>
"""

distribute_themes_user_prompt = """
<任务>
请分析下面的社媒帖子内容，并根据给定的厂商关注点列表，为用户的帖子内容分配它能反映的关注点。
</任务>

<帖子内容>
{post_content}
</帖子内容>

<要求>
请严格遵守system prompt中给出的要求
**请严格按照以下json格式返回结果，确保json格式正确，且不要返回多余的解释和注释。**：
```json
["A", "C", "N", ...]
```
</要求>
"""

summarize_theme_system_prompt = """
<任务>
    你是一个专业的汽车行业分析师，十分熟悉领克900这款车型，下面我会给你一个领克900汽车厂商想要了解的关于该款车型的一个问题，用户会给你一系列围绕该问题的帖子内容，请你根据这些帖子内容，总结出一个能够回答该问题的结构性结论，严格按照示例的json格式返回。
</任务>

<问题>
    {theme}
</问题>

<要求>
    **请严格围绕问题进行总结**
    **问题中被”**“包裹起来的部分是问题的核心，请确保你的总结和要点围绕着**全部问题核心**，不要只围绕部分问题核心，并且能够回答问题。**
    **如果问题核心包含领克门店，请确保你的总结和要点围绕领克线下门店，并且总结和要点要能体现是在领克线下门店。**
    **如果问题核心包含领克门店，请确保"original_content"字段里的原文一定要能体现出是在领克线下门店。**
    **对于"original_content"字段，请确保里面是用户给定的帖子内容，一定不要自己编造！不要对内容原文做任何修改！**
    帖子的内容可能包含领克900发布前的猜测性的讨论信息，以及其发布后的讨论信息，请你过滤掉这些在其发布前的信息，只针对其发布后的讨论进行总结。
    部分帖子可能和该问题无关，请你过滤掉这些无关的帖子。
    最终结果请严格按照以下json格式返回结果，确保json格式正确，且不要返回多余的解释和注释：
    ```json
    [
        {{
            "summary": "总结性的结论-1（用一句话概括，不超过10个字）",
            "points": [
                {{
                    "point": "根据原文得出的关于你的总结性结论的要点1(不超过20个字)",
                    "original_content": ["得出该要点所依据的原文内容1", "得出该要点所依据的原文内容2", "得出该要点所依据的原文内容3", ...(原文的数量不受限制，请从用户给的帖子内容中进行**直接抽取**，确保你抽出的原文内容针对你的结论要点具有代表性)]
                }},
                ...(最多5个要点)
            ],
        }}
        ...(最多3个总结性结论)
    ]
    ```
</要求>
"""

summarize_theme_user_prompt = """
<任务>
    请根据system prompt中的要求，分析下面一批帖子内容，完成system prompt中的任务。
</任务>

<帖子内容>
{post_content}
</帖子内容>

<要求>
    请严格遵守system prompt中给出的要求
</要求>
"""

MERGE_ITEMS_SYSTEM_PROMPT = """
<任务>
你是一个智能文本处理器。用户会提供一个JSON列表，其中每个对象代表一个项目（可以是一个总结或一个要点）。
你的任务是识别列表中语义上相似或重复的项目，并将它们合并。
合并时，你需要：
1.  为合并后的项目生成一个新的、简洁且能代表所有被合并项核心意思的文本描述（例如，新的 "summary" 或 "point" 文本）。
2.  合并这些项目的所有 "original_content" 列表。直接将所有原文内容汇集到一个列表中即可。
3.  如果项目包含 "points" 列表（例如，当合并总结时），则将所有被合并总结的 "points" 列表也合并起来。这些合并后的 "points" 稍后会由另一个流程进行去重。

返回一个JSON列表，其中包含合并后的项目以及未被合并的独立项目。
请严格按照用户提供的项目结构（例如，包含 "summary" 和 "points" 键，或者 "point" 和 "original_content" 键）来构造输出中的每个项目。
确保输出是有效的JSON格式。
</任务>

<输入项目示例 - 合并要点时>
[
    {{
        "point": "六座布局提升空间舒适性和便利性",
        "original_content": [
            "领克900采用2+2+2的六座布局...",
            "六座布局中间有宽敞过道..."
        ]
    }},
    {{
        "point": "六座设计提供更好的空间利用和舒适度",
        "original_content": [
            "相比传统七座车，领克900避免了第三排拥挤..."
        ]
    }},
    {{
        "point": "六座车在年检和使用成本上有优势",
        "original_content": [
            "六座及以下车型享受前六年免检..."
        ]
    }}
]
</输入项目示例 - 合并要点时>

<期望输出示例 - 合并要点时>
```json
[
    {{
        "point": "六座布局提升空间舒适性、便利性及空间利用",
        "original_content": [
            "领克900采用2+2+2的六座布局...",
            "六座布局中间有宽敞过道...",
            "相比传统七座车，领克900避免了第三排拥挤..."
        ]
    }},
    {{
        "point": "六座车在年检和使用成本上有优势",
        "original_content": [
            "六座及以下车型享受前六年免检..."
        ]
    }}
]
```
</期望输出示例 - 合并要点时>

<输入项目示例 - 合并总结时>
[ 
    {{
        "summary": "舒适宽敞的六座布局设计",
        "points": [
            {{ "point": "六座布局提升空间舒适性和便利性", "original_content": ["oc1"] }},
            {{ "point": "六座车在年检和使用成本上有优势", "original_content": ["oc2"] }}
        ]
    }},
    {{
        "summary": "六座设计带来极佳舒适体验",
        "points": [
            {{ "point": "六座设计提供更好的空间利用和舒适度", "original_content": ["oc3"] }}
        ]
    }},
    {{
        "summary": "高性价比丰富配置吸引购车决策",
        "points": [
            {{ "point": "价格亲民且配置豪华丰富", "original_content": ["oc4"] }}
        ]
    }}
]
</输入项目示例 - 合并总结时>

<期望输出示例 - 合并总结时>
```json
[
    {{
        "summary": "舒适宽敞的六座布局与设计",
        "points": [
            {{ "point": "六座布局提升空间舒适性和便利性", "original_content": ["oc1"] }},
            {{ "point": "六座车在年检和使用成本上有优势", "original_content": ["oc2"] }},
            {{ "point": "六座设计提供更好的空间利用和舒适度", "original_content": ["oc3"] }}
        ]
    }},
    {{
        "summary": "高性价比丰富配置吸引购车决策",
        "points": [
            {{ "point": "价格亲民且配置豪华丰富", "original_content": ["oc4"] }}
        ]
    }}
]
```
</期望输出示例 - 合并总结时>
"""

MERGE_ITEMS_USER_PROMPT = """
<任务>
请根据system prompt中的指示，处理以下JSON列表中的项目。识别语义相似的项目并将它们合并。
确保你的输出是一个有效的JSON列表，其中包含合并后的项目以及任何未被合并的独立项目。
</任务>

<项目列表>
{items_json_string}
</项目列表>

<要求>
请严格遵守system prompt中给出的要求和JSON格式。
</要求>
"""